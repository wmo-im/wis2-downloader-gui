import{p as D,r as x,c as P,u as se,w as Pe,a as le,g as te,m as ct,b as dt,d as ft,e as mt,f as U,h as vt,i as gt,j as oe,k as s,l as H,n as W,o as z,q,s as be,t as xe,V as C,v as yt,x as pe,y as Fe,z as Re,A,B as ce,C as ue,I as _e,D as bt,E as ht,F as pt,L as St,G as K,H as je,J,K as Ae,M as ae,N as wt,O as Se,P as kt,_ as Pt,Q as xt,R as _,S as Y,T as k,U as Tt,W as $,X as Z,Y as $e,Z as ee,$ as Oe,a0 as Vt,a1 as It}from"./index-cdc26227.js";import{V as Te,a as Ve,b as he,c as ie,d as Ge,e as He,f as we,g as Dt,h as Ct,i as ke,j as G,k as Ee,l as Bt}from"./VRow-5953e39e.js";const Ft=(e,l,t)=>e==null||l==null?-1:e.toString().toLocaleLowerCase().indexOf(l.toString().toLocaleLowerCase()),_t=D({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function At(e,l,t){var u;const a=[],n=(t==null?void 0:t.default)??Ft,c=t!=null&&t.filterKeys?le(t.filterKeys):!1,o=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return a;e:for(let r=0;r<e.length;r++){const[d,i=d]=le(e[r]),g={},f={};let b=-1;if(l&&!(t!=null&&t.noFilter)){if(typeof d=="object"){const m=c||Object.keys(i);for(const v of m){const w=te(i,v,i),V=(u=t==null?void 0:t.customKeyFilter)==null?void 0:u[v];if(b=V?V(w,l,d):n(w,l,d),b!==-1&&b!==!1)V?g[v]=b:f[v]=b;else if((t==null?void 0:t.filterMode)==="every")continue e}}else b=n(d,l,d),b!==-1&&b!==!1&&(f.title=b);const S=Object.keys(f).length,y=Object.keys(g).length;if(!S&&!y||(t==null?void 0:t.filterMode)==="union"&&y!==o&&!S||(t==null?void 0:t.filterMode)==="intersection"&&(y!==o||!S))continue}a.push({index:r,matches:{...f,...g}})}return a}function $t(e,l,t,a){const n=x([]),c=x(new Map),o=P(()=>a!=null&&a.transform?se(l).map(r=>[r,a.transform(r)]):se(l));Pe(()=>{const r=typeof t=="function"?t():se(t),d=typeof r!="string"&&typeof r!="number"?"":String(r),i=At(o.value,d,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),g=se(l),f=[],b=new Map;i.forEach(S=>{let{index:y,matches:m}=S;const v=g[y];f.push(v),b.set(v.value,m)}),n.value=f,c.value=b});function u(r){return c.value.get(r.value)}return{filteredItems:n,filteredMatches:c,getMatches:u}}const Ke=D({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...ct(),...dt(),...ft(),...mt()},"VTable"),ne=U()({name:"VTable",props:Ke(),setup(e,l){let{slots:t}=l;const{themeClasses:a}=vt(e),{densityClasses:n}=gt(e);return oe(()=>s(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!t.top,"v-table--has-bottom":!!t.bottom,"v-table--hover":e.hover},a.value,n.value,e.class],style:e.style},{default:()=>{var c,o,u;return[(c=t.top)==null?void 0:c.call(t),t.default?s("div",{class:"v-table__wrapper",style:{height:H(e.height)}},[s("table",null,[t.default()])]):(o=t.wrapper)==null?void 0:o.call(t),(u=t.bottom)==null?void 0:u.call(t)]}})),{}}});const Ot=D({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Ue=Symbol.for("vuetify:data-table-pagination");function Et(e){const l=W(e,"page",void 0,a=>+(a??1)),t=W(e,"itemsPerPage",void 0,a=>+(a??10));return{page:l,itemsPerPage:t}}function Mt(e){const{page:l,itemsPerPage:t,itemsLength:a}=e,n=P(()=>t.value===-1?0:t.value*(l.value-1)),c=P(()=>t.value===-1?a.value:Math.min(a.value,n.value+t.value)),o=P(()=>t.value===-1||a.value===0?1:Math.ceil(a.value/t.value));Pe(()=>{l.value>o.value&&(l.value=o.value)});function u(f){t.value=f,l.value=1}function r(){l.value=be(l.value+1,1,o.value)}function d(){l.value=be(l.value-1,1,o.value)}function i(f){l.value=be(f,1,o.value)}const g={page:l,itemsPerPage:t,startIndex:n,stopIndex:c,pageCount:o,itemsLength:a,nextPage:r,prevPage:d,setPage:i,setItemsPerPage:u};return z(Ue,g),g}function Nt(){const e=q(Ue);if(!e)throw new Error("Missing pagination!");return e}function Lt(e){const{items:l,startIndex:t,stopIndex:a,itemsPerPage:n}=e;return{paginatedItems:P(()=>n.value<=0?l.value:l.value.slice(t.value,a.value))}}const Je=D({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Me=U()({name:"VDataTableFooter",props:Je(),setup(e,l){let{slots:t}=l;const{t:a}=xe(),{page:n,pageCount:c,startIndex:o,stopIndex:u,itemsLength:r,itemsPerPage:d,setItemsPerPage:i}=Nt(),g=P(()=>e.itemsPerPageOptions.map(f=>typeof f=="number"?{value:f,title:f===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(f)}:{...f,title:a(f.title)}));return()=>{var f;return s("div",{class:"v-data-table-footer"},[(f=t.prepend)==null?void 0:f.call(t),s("div",{class:"v-data-table-footer__items-per-page"},[s("span",null,[a(e.itemsPerPageText)]),s(Te,{items:g.value,modelValue:d.value,"onUpdate:modelValue":b=>i(Number(b)),density:"compact",variant:"outlined","hide-details":!0},null)]),s("div",{class:"v-data-table-footer__info"},[s("div",null,[a(e.pageText,r.value?o.value+1:0,u.value,r.value)])]),s("div",{class:"v-data-table-footer__pagination"},[s(C,{icon:e.firstIcon,variant:"plain",onClick:()=>n.value=1,disabled:n.value===1,"aria-label":a(e.firstPageLabel)},null),s(C,{icon:e.prevIcon,variant:"plain",onClick:()=>n.value=Math.max(1,n.value-1),disabled:n.value===1,"aria-label":a(e.prevPageLabel)},null),e.showCurrentPage&&s("span",{key:"page",class:"v-data-table-footer__page"},[n.value]),s(C,{icon:e.nextIcon,variant:"plain",onClick:()=>n.value=Math.min(c.value,n.value+1),disabled:n.value===c.value,"aria-label":a(e.nextPageLabel)},null),s(C,{icon:e.lastIcon,variant:"plain",onClick:()=>n.value=c.value,disabled:n.value===c.value,"aria-label":a(e.lastPageLabel)},null)])])}}}),Ie=yt({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(e,l)=>{let{slots:t,attrs:a}=l;const n=e.tag??"td";return s(n,pe({class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding},`v-data-table-column--align-${e.align}`],style:{height:H(e.height),width:H(e.width),left:H(e.fixedOffset||null)}},a),{default:()=>{var c;return[(c=t.default)==null?void 0:c.call(t)]}})}),Rt=D({headers:{type:Array,default:()=>[]}},"DataTable-header"),We=Symbol.for("vuetify:data-table-headers");function jt(e,l){const t=x([]),a=x([]);Pe(()=>{var b,S,y;const c=e.headers.length?Array.isArray(e.headers[0])?e.headers:[e.headers]:[],o=c.flatMap((m,v)=>m.map(w=>({column:w,row:v}))),u=c.length,r={title:"",sortable:!1},d={...r,width:48};if((b=l==null?void 0:l.groupBy)!=null&&b.value.length){const m=o.findIndex(v=>{let{column:w}=v;return w.key==="data-table-group"});m<0?o.unshift({column:{...r,key:"data-table-group",title:"Group",rowspan:u},row:0}):o.splice(m,1,{column:{...r,...o[m].column},row:o[m].row})}if((S=l==null?void 0:l.showSelect)!=null&&S.value){const m=o.findIndex(v=>{let{column:w}=v;return w.key==="data-table-select"});m<0?o.unshift({column:{...d,key:"data-table-select",rowspan:u},row:0}):o.splice(m,1,{column:{...d,...o[m].column},row:o[m].row})}if((y=l==null?void 0:l.showExpand)!=null&&y.value){const m=o.findIndex(v=>{let{column:w}=v;return w.key==="data-table-expand"});m<0?o.push({column:{...d,key:"data-table-expand",rowspan:u},row:0}):o.splice(m,1,{column:{...d,...o[m].column},row:o[m].row})}const i=Fe(u).map(()=>[]),g=Fe(u).fill(0);o.forEach(m=>{let{column:v,row:w}=m;const V=v.key??(typeof v.value=="string"?v.value:null),T=v.value??v.key??null;for(let h=w;h<=w+(v.rowspan??1)-1;h++)i[h].push({...v,key:V,value:T,fixedOffset:g[h],sortable:v.sortable??V!=null}),g[h]+=Number(v.width??0)}),i.forEach(m=>{for(let v=m.length;v--;v>=0)if(m[v].fixed){m[v].lastFixed=!0;return}});const f=new Set;t.value=i.map(m=>{const v=[];for(const w of m)f.has(w.key)||(f.add(w.key),v.push(w));return v}),a.value=i.at(-1)??[]});const n={headers:t,columns:a};return z(We,n),n}function de(){const e=q(We);if(!e)throw new Error("Missing headers!");return e}const Gt={showSelectAll:!1,allSelected:()=>[],select:e=>{var a;let{items:l,value:t}=e;return new Set(t?[(a=l[0])==null?void 0:a.value]:[])},selectAll:e=>{let{selected:l}=e;return l}},ze={showSelectAll:!0,allSelected:e=>{let{currentPage:l}=e;return l},select:e=>{let{items:l,value:t,selected:a}=e;for(const n of l)t?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:l,currentPage:t,selected:a}=e;return ze.select({items:t,value:l,selected:a})}},qe={showSelectAll:!0,allSelected:e=>{let{allItems:l}=e;return l},select:e=>{let{items:l,value:t,selected:a}=e;for(const n of l)t?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:l,allItems:t,selected:a}=e;return qe.select({items:t,value:l,selected:a})}},Ht=D({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Re}},"DataTable-select"),Qe=Symbol.for("vuetify:data-table-selection");function Kt(e,l){let{allItems:t,currentPage:a}=l;const n=W(e,"modelValue",e.modelValue,m=>new Set(le(m).map(v=>{var w;return((w=t.value.find(V=>e.valueComparator(v,V.value)))==null?void 0:w.value)??v})),m=>[...m.values()]),c=P(()=>t.value.filter(m=>m.selectable)),o=P(()=>a.value.filter(m=>m.selectable)),u=P(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Gt;case"all":return qe;case"page":default:return ze}});function r(m){return le(m).every(v=>n.value.has(v.value))}function d(m){return le(m).some(v=>n.value.has(v.value))}function i(m,v){const w=u.value.select({items:m,value:v,selected:new Set(n.value)});n.value=w}function g(m){i([m],!r([m]))}function f(m){const v=u.value.selectAll({value:m,allItems:c.value,currentPage:o.value,selected:new Set(n.value)});n.value=v}const b=P(()=>n.value.size>0),S=P(()=>{const m=u.value.allSelected({allItems:c.value,currentPage:o.value});return!!m.length&&r(m)}),y={toggleSelect:g,select:i,selectAll:f,isSelected:r,isSomeSelected:d,someSelected:b,allSelected:S,showSelectAll:u.value.showSelectAll};return z(Qe,y),y}function fe(){const e=q(Qe);if(!e)throw new Error("Missing selection!");return e}const Ut=D({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Xe=Symbol.for("vuetify:data-table-sort");function Jt(e){const l=W(e,"sortBy"),t=A(e,"mustSort"),a=A(e,"multiSort");return{sortBy:l,mustSort:t,multiSort:a}}function Wt(e){const{sortBy:l,mustSort:t,multiSort:a,page:n}=e,c=r=>{if(r.key==null)return;let d=l.value.map(g=>({...g}))??[];const i=d.find(g=>g.key===r.key);i?i.order==="desc"?t.value?i.order="asc":d=d.filter(g=>g.key!==r.key):i.order="desc":a.value?d=[...d,{key:r.key,order:"asc"}]:d=[{key:r.key,order:"asc"}],l.value=d,n&&(n.value=1)};function o(r){return!!l.value.find(d=>d.key===r.key)}const u={sortBy:l,toggleSort:c,isSorted:o};return z(Xe,u),u}function zt(){const e=q(Xe);if(!e)throw new Error("Missing sort!");return e}function qt(e,l,t){const a=xe();return{sortedItems:P(()=>t.value.length?Qt(l.value,t.value,a.current.value,e.customKeySort):l.value)}}function Qt(e,l,t,a){const n=new Intl.Collator(t,{sensitivity:"accent",usage:"sort"});return[...e].sort((c,o)=>{for(let u=0;u<l.length;u++){const r=l[u].key,d=l[u].order??"asc";if(d===!1)continue;let i=ce(c.raw,r),g=ce(o.raw,r);if(d==="desc"&&([i,g]=[g,i]),a!=null&&a[r]){const f=a[r](i,g);if(!f)continue;return f}if(i instanceof Date&&g instanceof Date)return i.getTime()-g.getTime();if([i,g]=[i,g].map(f=>f!=null?f.toString().toLocaleLowerCase():f),i!==g)return ue(i)&&ue(g)?0:ue(i)?-1:ue(g)?1:!isNaN(i)&&!isNaN(g)?Number(i)-Number(g):n.compare(i,g)}return 0})}const Ye=D({color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:_e,default:"$sortAsc"},sortDescIcon:{type:_e,default:"$sortDesc"},...bt()},"VDataTableHeaders"),Ne=U()({name:"VDataTableHeaders",props:Ye(),setup(e,l){let{slots:t,emit:a}=l;const{toggleSort:n,sortBy:c,isSorted:o}=zt(),{someSelected:u,allSelected:r,selectAll:d,showSelectAll:i}=fe(),{columns:g,headers:f}=de(),{loaderClasses:b}=ht(e),S=(T,h)=>{if(!(!e.sticky&&!T.fixed))return{position:"sticky",zIndex:T.fixed?4:e.sticky?3:void 0,left:T.fixed?H(T.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${h})`:void 0}};function y(T){const h=c.value.find(O=>O.key===T.key);return h?h.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:m,backgroundColorStyles:v}=pt(e,"color"),w=P(()=>({headers:f.value,columns:g.value,toggleSort:n,isSorted:o,sortBy:c.value,someSelected:u.value,allSelected:r.value,selectAll:d,getSortIcon:y,getFixedStyles:S})),V=T=>{let{column:h,x:O,y:R}=T;const p=h.key==="data-table-select"||h.key==="data-table-expand";return s(Ie,{tag:"th",align:h.align,class:["v-data-table__th",{"v-data-table__th--sortable":h.sortable,"v-data-table__th--sorted":o(h)},b.value],style:{width:H(h.width),minWidth:H(h.width),...S(h,R)},colspan:h.colspan,rowspan:h.rowspan,onClick:h.sortable?()=>n(h):void 0,lastFixed:h.lastFixed,noPadding:p},{default:()=>{var M;const I=`column.${h.key}`,E={column:h,selectAll:d,isSorted:o,toggleSort:n,sortBy:c.value,someSelected:u.value,allSelected:r.value,getSortIcon:y};return t[I]?t[I](E):h.key==="data-table-select"?((M=t["column.data-table-select"])==null?void 0:M.call(t,E))??(i&&s(Ve,{modelValue:r.value,indeterminate:u.value&&!r.value,"onUpdate:modelValue":d},null)):s("div",{class:"v-data-table-header__content"},[s("span",null,[h.title]),h.sortable&&s(je,{key:"icon",class:"v-data-table-header__sort-icon",icon:y(h)},null),e.multiSort&&o(h)&&s("div",{key:"badge",class:["v-data-table-header__sort-badge",...m.value],style:v.value},[c.value.findIndex(B=>B.key===h.key)+1])])}})};oe(()=>s(K,null,[t.headers?t.headers(w.value):f.value.map((T,h)=>s("tr",null,[T.map((O,R)=>s(V,{column:O,x:R,y:h},null))])),e.loading&&s("tr",{class:"v-data-table-progress"},[s("th",{colspan:g.value.length},[s(St,{name:"v-data-table-progress",active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:t.loader})])])]))}}),Xt=D({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Ze=Symbol.for("vuetify:data-table-group");function Yt(e){return{groupBy:W(e,"groupBy")}}function Zt(e){const{groupBy:l,sortBy:t}=e,a=x(new Set),n=P(()=>l.value.map(d=>({...d,order:d.order??!1})).concat(t.value));function c(d){return a.value.has(d.id)}function o(d){const i=new Set(a.value);c(d)?i.delete(d.id):i.add(d.id),a.value=i}function u(d){function i(g){const f=[];for(const b of g.items)"type"in b&&b.type==="group"?f.push(...i(b)):f.push(b);return f}return i({type:"group",items:d,id:"dummy",key:"dummy",value:"dummy",depth:0})}const r={sortByWithGroups:n,toggleGroup:o,opened:a,groupBy:l,extractRows:u,isGroupOpen:c};return z(Ze,r),r}function et(){const e=q(Ze);if(!e)throw new Error("Missing group!");return e}function ea(e,l){if(!e.length)return[];const t=new Map;for(const a of e){const n=ce(a.raw,l);t.has(n)||t.set(n,[]),t.get(n).push(a)}return t}function tt(e,l){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!l.length)return[];const n=ea(e,l[0]),c=[],o=l.slice(1);return n.forEach((u,r)=>{const d=l[0],i=`${a}_${d}_${r}`;c.push({depth:t,id:i,key:d,value:r,items:o.length?tt(u,o,t+1,i):u,type:"group"})}),c}function at(e,l){const t=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&t.push(a),(l.has(a.id)||a.value==null)&&t.push(...at(a.items,l))):t.push(a);return t}function ta(e,l,t){return{flatItems:P(()=>{if(!l.value.length)return e.value;const n=tt(e.value,l.value.map(c=>c.key));return at(n,t.value)})}}const aa=D({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),la=U()({name:"VDataTableGroupHeaderRow",props:aa(),setup(e,l){let{slots:t}=l;const{isGroupOpen:a,toggleGroup:n,extractRows:c}=et(),{isSelected:o,isSomeSelected:u,select:r}=fe(),{columns:d}=de(),i=P(()=>c([e.item]));return()=>s("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[d.value.map(g=>{var f,b;if(g.key==="data-table-group"){const S=a(e.item)?"$expand":"$next",y=()=>n(e.item);return((f=t["data-table-group"])==null?void 0:f.call(t,{item:e.item,count:i.value.length,props:{icon:S,onClick:y}}))??s(Ie,{class:"v-data-table-group-header-row__column"},{default:()=>[s(C,{size:"small",variant:"text",icon:S,onClick:y},null),s("span",null,[e.item.value]),s("span",null,[J("("),i.value.length,J(")")])]})}if(g.key==="data-table-select"){const S=o(i.value),y=u(i.value)&&!S,m=v=>r(i.value,v);return((b=t["data-table-select"])==null?void 0:b.call(t,{props:{modelValue:S,indeterminate:y,"onUpdate:modelValue":m}}))??s("td",null,[s(Ve,{modelValue:S,indeterminate:y,"onUpdate:modelValue":m},null)])}return s("td",null,null)})])}}),na=D({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),lt=Symbol.for("vuetify:datatable:expanded");function oa(e){const l=A(e,"expandOnClick"),t=W(e,"expanded",e.expanded,u=>new Set(u),u=>[...u.values()]);function a(u,r){const d=new Set(t.value);r?d.add(u.value):d.delete(u.value),t.value=d}function n(u){return t.value.has(u.value)}function c(u){a(u,!n(u))}const o={expand:a,expanded:t,expandOnClick:l,isExpanded:n,toggleExpand:c};return z(lt,o),o}function nt(){const e=q(lt);if(!e)throw new Error("foo");return e}const ra=D({index:Number,item:Object,onClick:Function},"VDataTableRow"),sa=U()({name:"VDataTableRow",props:ra(),setup(e,l){let{slots:t}=l;const{isSelected:a,toggleSelect:n}=fe(),{isExpanded:c,toggleExpand:o}=nt(),{columns:u}=de();oe(()=>s("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!e.onClick}],onClick:e.onClick},[e.item&&u.value.map((r,d)=>s(Ie,{align:r.align,fixed:r.fixed,fixedOffset:r.fixedOffset,lastFixed:r.lastFixed,noPadding:r.key==="data-table-select"||r.key==="data-table-expand",width:r.width},{default:()=>{var b,S;const i=e.item,g=`item.${r.key}`,f={index:e.index,item:i.raw,internalItem:i,value:ce(i.columns,r.key),column:r,isSelected:a,toggleSelect:n,isExpanded:c,toggleExpand:o};return t[g]?t[g](f):r.key==="data-table-select"?((b=t["item.data-table-select"])==null?void 0:b.call(t,f))??s(Ve,{disabled:!i.selectable,modelValue:a([i]),onClick:Ae(()=>n(i),["stop"])},null):r.key==="data-table-expand"?((S=t["item.data-table-expand"])==null?void 0:S.call(t,f))??s(C,{icon:c(i)?"$collapse":"$expand",size:"small",variant:"text",onClick:Ae(()=>o(i),["stop"])},null):ae(f.value)}}))]))}}),ot=D({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,"onClick:row":Function},"VDataTableRows"),Le=U()({name:"VDataTableRows",props:ot(),setup(e,l){let{emit:t,slots:a}=l;const{columns:n}=de(),{expandOnClick:c,toggleExpand:o,isExpanded:u}=nt(),{isSelected:r,toggleSelect:d}=fe(),{toggleGroup:i,isGroupOpen:g}=et(),{t:f}=xe();return oe(()=>{var b,S;return e.loading?s("tr",{class:"v-data-table-rows-loading",key:"loading"},[s("td",{colspan:n.value.length},[((b=a.loading)==null?void 0:b.call(a))??f(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?s("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[s("td",{colspan:n.value.length},[((S=a["no-data"])==null?void 0:S.call(a))??f(e.noDataText)])]):s(K,null,[e.items.map((y,m)=>{var V;if(y.type==="group")return a["group-header"]?a["group-header"]({index:m,item:y,columns:n.value,isExpanded:u,toggleExpand:o,isSelected:r,toggleSelect:d,toggleGroup:i,isGroupOpen:g}):s(la,{key:`group-header_${y.id}`,item:y},a);const v={index:m,item:y.raw,internalItem:y,columns:n.value,isExpanded:u,toggleExpand:o,isSelected:r,toggleSelect:d},w={...v,props:{key:`item_${y.key??y.index}`,onClick:c.value||e["onClick:row"]?T=>{var h;c.value&&o(y),(h=e["onClick:row"])==null||h.call(e,T,{item:y.raw,internalItem:y})}:void 0,index:m,item:y}};return s(K,null,[a.item?a.item(w):s(sa,w.props,a),u(y)&&((V=a["expanded-row"])==null?void 0:V.call(a,v))])})])}),{}}}),ua=D({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataTable-items");function ia(e,l,t,a){const n=e.returnObject?l:te(l,e.itemValue),c=te(l,e.itemSelectable,!0),o=a.reduce((u,r)=>(r.key!=null&&(u[r.key]=te(l,r.value)),u),{});return{type:"item",key:e.returnObject?te(l,e.itemValue):n,index:t,value:n,selectable:c,columns:o,raw:l}}function ca(e,l,t){return l.map((a,n)=>ia(e,a,n,t))}function da(e,l){return{items:P(()=>ca(e,e.items,l.value))}}function fa(e){let{page:l,itemsPerPage:t,sortBy:a,groupBy:n,search:c}=e;const o=wt("VDataTable"),u=P(()=>({page:l.value,itemsPerPage:t.value,sortBy:a.value,groupBy:n.value,search:c.value}));Se(()=>c==null?void 0:c.value,()=>{l.value=1});let r=null;Se(u,()=>{Re(r,u.value)||(o.emit("update:options",u.value),r=u.value)},{deep:!0,immediate:!0})}const ma=D({...ot(),width:[String,Number],search:String,...na(),...Xt(),...Rt(),...ua(),...Ht(),...Ut(),...Ye(),...Ke()},"DataTable"),va=D({...Ot(),...ma(),..._t(),...Je()},"VDataTable"),ga=U()({name:"VDataTable",props:va(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,l){let{emit:t,slots:a}=l;const{groupBy:n}=Yt(e),{sortBy:c,multiSort:o,mustSort:u}=Jt(e),{page:r,itemsPerPage:d}=Et(e),{columns:i,headers:g}=jt(e,{groupBy:n,showSelect:A(e,"showSelect"),showExpand:A(e,"showExpand")}),{items:f}=da(e,i),b=A(e,"search"),{filteredItems:S}=$t(e,f,b,{transform:ye=>ye.columns}),{toggleSort:y}=Wt({sortBy:c,multiSort:o,mustSort:u,page:r}),{sortByWithGroups:m,opened:v,extractRows:w,isGroupOpen:V,toggleGroup:T}=Zt({groupBy:n,sortBy:c}),{sortedItems:h}=qt(e,S,m),{flatItems:O}=ta(h,n,v),R=P(()=>O.value.length),{startIndex:p,stopIndex:I,pageCount:E,setItemsPerPage:M}=Mt({page:r,itemsPerPage:d,itemsLength:R}),{paginatedItems:B}=Lt({items:O,startIndex:p,stopIndex:I,itemsPerPage:d}),N=P(()=>w(B.value)),{isSelected:j,select:me,selectAll:ve,toggleSelect:ge,someSelected:re,allSelected:Q}=Kt(e,{allItems:f,currentPage:N}),{isExpanded:F,toggleExpand:rt}=oa(e);fa({page:r,itemsPerPage:d,sortBy:c,groupBy:n,search:b}),kt({VDataTableRows:{hideNoData:A(e,"hideNoData"),noDataText:A(e,"noDataText"),loading:A(e,"loading"),loadingText:A(e,"loadingText")}});const L=P(()=>({page:r.value,itemsPerPage:d.value,sortBy:c.value,pageCount:E.value,toggleSort:y,setItemsPerPage:M,someSelected:re.value,allSelected:Q.value,isSelected:j,select:me,selectAll:ve,toggleSelect:ge,isExpanded:F,toggleExpand:rt,isGroupOpen:V,toggleGroup:T,items:N.value,groupedItems:B.value,columns:i.value,headers:g.value}));return oe(()=>{const[ye]=Me.filterProps(e),[st]=Ne.filterProps(e),[ut]=Le.filterProps(e),[it]=ne.filterProps(e);return s(ne,pe({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},it),{top:()=>{var X;return(X=a.top)==null?void 0:X.call(a,L.value)},default:()=>{var X,De,Ce,Be;return a.default?a.default(L.value):s(K,null,[(X=a.colgroup)==null?void 0:X.call(a,L.value),s("thead",null,[s(Ne,st,a)]),(De=a.thead)==null?void 0:De.call(a,L.value),s("tbody",null,[a.body?a.body(L.value):s(Le,pe(ut,{items:B.value}),a)]),(Ce=a.tbody)==null?void 0:Ce.call(a,L.value),(Be=a.tfoot)==null?void 0:Be.call(a,L.value)])},bottom:()=>a.bottom?a.bottom(L.value):s(K,null,[s(Me,ye,{prepend:a["footer.prepend"]})])})}),{}}});const ya=xt({name:"ConfigSub",components:{VCard:ie,VCardTitle:Ge,VCardText:He,VCardItem:we,VForm:Dt,VBtn:C,VListGroup:Ct,VSelect:Te,VTextField:ke,VTable:ne,VDataTable:ga},setup(){const e=[{title:"Meteorological Service of Canada",url:"https://api.weather.gc.ca/collections/wis2-discovery-metadata/items"},{title:"China Meteorological Administration",url:"https://gdc.wis.cma.cn/collections/wis2-discovery-metadata/items"}],l=x(""),t=x(null),a=x(null),n=x([]),c=x(!1),o=x(!1),u=x(null),r=x(!1),d=x(null),i=x(!1),g=x(!1),f=x([]),b=x(""),S=x(""),y=x(!1),m=P(()=>l.value!==""),v=async()=>{try{const p=await window.electronAPI.loadSettings();p&&(b.value=p.broker,f.value=p.topics,S.value=p.downloadDirectory,y.value=p.subscribeStatus)}catch(p){console.error("Error loading settings: ",p)}},w=async()=>{c.value=!0;const p=new URLSearchParams;t.value&&p.append("title",t.value),a.value&&p.append("q",a.value);const I=await fetch(`${l.value}?${p}`);if(!I.ok)throw new Error("Failed to query catalogue");const M=(await I.json()).features;M&&(n.value=M.map(B=>{const N=B.properties||{},j=N.identifier,me=N.title,ve=N.created,ge=N["wmo:dataPolicy"];let re=null,Q=null;for(const F of B.links||[])if(F.rel==="items"&&F.href.startsWith("mqtt")){re=F.channel;break}if(j)if(j.includes(":")){const F=j.split(":");Q=F.length<5?F[1]:F[3]}else Q=j.split(".")[1];return{identifier:j,center_identifier:Q,title:me,creation_date:ve,topic_hierarchy:re,data_policy:ge}})),n.value.sort((B,N)=>B.title.localeCompare(N.title)),o.value=!0,c.value=!1},V=p=>{u.value=p,r.value=!0},T=p=>p.replace(/_/g," ").split(" ").map(I=>I.charAt(0).toUpperCase()+I.slice(1)).join(" "),h=async p=>{i.value=!0;const I=`${l.value}/${p}?f=json`,M=await(await fetch(I)).json();d.value=JSON.stringify(M,null,1),g.value=!0,i.value=!1},O=async p=>{if(console.log("Adding topic to subscription: "+p),f.value.includes(p)||f.value.push(p),y.value){const I={topic:p,action:"add"};await window.electronAPI.manageTopics(I)}r.value=!1},R=async p=>{if(console.log("Removing topic from subscription: "+p),f.value.includes(p)&&f.value.splice(f.value.indexOf(p),1),y.value){const I={topic:p,action:"delete"};await window.electronAPI.manageTopics(I)}r.value=!1};return Se(f,(p,I)=>{const E={broker:b.value,topics:Array.from(f.value),downloadDirectory:S.value,subscribeStatus:y.value};console.log("Storing settings:",E),window.electronAPI.storeSettings(E)},{deep:!0}),Tt(()=>{v()}),{catalogueList:e,selectedCatalogue:l,searchedTitle:t,query:a,datasets:n,loadingBoolean:c,tableBoolean:o,catalogueBoolean:m,selectedItem:u,dialog:r,searchCatalogue:w,openDialog:V,formatKey:T,openJSON:h,formattedJson:d,loadingJsonBoolean:i,jsonDialog:g,selectedTopics:f,addToSubscription:O,removeFromSubscription:R,subscribeStatus:y}}}),ba=e=>(Vt("data-v-c9b97b57"),e=e(),It(),e),ha=ba(()=>$("thead",null,[$("tr",null,[$("th",{scope:"row",class:"text-left"}," Discovery Metadata Records Found ")])],-1)),pa=["onClick"],Sa={class:"check-mark"},wa={key:0};function ka(e,l,t,a,n,c){return _(),Y(he,{class:"justify-center"},{default:k(()=>[s(G,{cols:"12",class:"max-form-width"},{default:k(()=>[s(ie,{"min-height":"700px"},{default:k(()=>[s(Ge,{class:"big-title"},{default:k(()=>[J("Search a WIS2 Global Discovery Catalogue")]),_:1}),s(we,null,{default:k(()=>[s(he,{dense:""},{default:k(()=>[s(G,{cols:"4"},{default:k(()=>[s(Te,{modelValue:e.selectedCatalogue,"onUpdate:modelValue":l[0]||(l[0]=o=>e.selectedCatalogue=o),items:e.catalogueList,"item-title":"title","item-value":"url",label:"Choose a catalogue"},null,8,["modelValue","items"])]),_:1}),s(G,{cols:"4"},{default:k(()=>[s(ke,{modelValue:e.searchedTitle,"onUpdate:modelValue":l[1]||(l[1]=o=>e.searchedTitle=o),label:"Enter a title",hint:"Optional","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),s(G,{cols:"3"},{default:k(()=>[s(ke,{modelValue:e.query,"onUpdate:modelValue":l[2]||(l[2]=o=>e.query=o),label:"Search the catalogue",hint:"Optional","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),s(G,{cols:"1"},{default:k(()=>[s(C,{onClick:e.searchCatalogue,icon:"mdi-cloud-search",color:"#003DA5",variant:"flat",disabled:!e.catalogueBoolean,loading:e.loadingBoolean,class:"mx-3"},null,8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1}),s(we,null,{default:k(()=>[e.tableBoolean===!0?(_(),Y(ne,{key:0,hover:!0},{default:k(()=>[ha,$("tbody",null,[(_(!0),Z(K,null,$e(e.datasets,o=>(_(),Z("tr",{key:o.title,onClick:u=>e.openDialog(o),class:"clickable-row"},[$("td",null,ae(o.title),1),$("td",Sa,[e.selectedTopics.includes(o.topic_hierarchy)?(_(),Y(je,{key:0,icon:"mdi-check-circle"})):ee("",!0)])],8,pa))),128))])]),_:1})):ee("",!0),s(Ee,{modelValue:e.dialog,"onUpdate:modelValue":l[7]||(l[7]=o=>e.dialog=o),transition:"dialog-bottom-transition"},{default:k(()=>[s(ie,{class:"overflow-hidden"},{default:k(()=>[s(Oe,{title:e.selectedItem.title,color:"#003DA5"},{default:k(()=>[s(C,{icon:"mdi-close",variant:"text",onClick:l[3]||(l[3]=o=>e.dialog=!1)})]),_:1},8,["title"]),s(ne,{density:"comfortable",class:"my-4"},{default:k(()=>[(_(!0),Z(K,null,$e(e.selectedItem,(o,u)=>(_(),Z("tbody",null,[u!=="title"?(_(),Z("tr",wa,[$("td",null,[$("b",null,ae(e.formatKey(u)),1)]),$("td",null,ae(o),1)])):ee("",!0)]))),256))]),_:1}),s(Bt,null,{default:k(()=>[s(he,null,{default:k(()=>[s(G,{cols:"6"},{default:k(()=>[s(C,{color:"#E09D00",variant:"flat",block:"",onClick:l[4]||(l[4]=o=>e.openJSON(e.selectedItem.identifier)),loading:e.loadingJsonBoolean},{default:k(()=>[J(" View JSON ")]),_:1},8,["loading"])]),_:1}),s(G,{cols:"6"},{default:k(()=>[e.selectedTopics.includes(e.selectedItem.topic_hierarchy)?ee("",!0):(_(),Y(C,{key:0,color:"#64BF40",variant:"flat",block:"",onClick:l[5]||(l[5]=o=>e.addToSubscription(e.selectedItem.topic_hierarchy))},{default:k(()=>[J(" Add Dataset to Subscription")]),_:1})),e.selectedTopics.includes(e.selectedItem.topic_hierarchy)?(_(),Y(C,{key:1,color:"#D90429",variant:"flat",block:"",onClick:l[6]||(l[6]=o=>e.removeFromSubscription(e.selectedItem.topic_hierarchy))},{default:k(()=>[J(" Remove Dataset from Subscription")]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Ee,{modelValue:e.jsonDialog,"onUpdate:modelValue":l[9]||(l[9]=o=>e.jsonDialog=o),transition:"dialog-bottom-transition","max-height":"600px",scrollable:""},{default:k(()=>[s(ie,null,{default:k(()=>[s(Oe,{title:e.selectedItem.title,color:"#003DA5"},{default:k(()=>[s(C,{icon:"mdi-close",variant:"text",onClick:l[8]||(l[8]=o=>e.jsonDialog=!1)})]),_:1},8,["title"]),s(He,null,{default:k(()=>[$("pre",null,ae(e.formattedJson),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}const Ta=Pt(ya,[["render",ka],["__scopeId","data-v-c9b97b57"]]);export{Ta as default};
